# 在這裡如何上架新影片

本站在首頁會出現幾種「影片」區塊，上架方式各不相同，請依需求選擇：

---

## 一、首頁有哪些影片區塊？

| 區塊 | 說明 | 資料來源 |
|------|------|----------|
| **精選節目** | 首頁上方的精選推薦卡片（約 8 個） | Contentful：`video` 且 `isFeatured: true` |
| **節目時間表** | 依時段排程、可自動播放的節目表 | Contentful：由「統一節目管理」上架 |
| **影片專區** | 下方 iframe（所有影片／非洲／歐洲… 分類） | 目前是 **TCAWG 官網影片頁的站內複本**（靜態 HTML） |

---

## 二、上架「精選節目」（首頁精選推薦）

精選節目會出現在首頁上方的卡片區，資料來自 **Contentful**。

### 方式 A：在 Contentful 後台新增

1. 登入 [Contentful](https://app.contentful.com)，進入 Space（本專案為 `os5wf90ljenp`）。
2. **Content** → **Add entry** → 選擇內容類型 **Video**。
3. 填寫：
   - **標題**（title）：影片名稱  
   - **描述**（description）：簡短說明（選填）  
   - **YouTube ID**（youTubeId 或 youtubeId）：例如 `3GZCJfIOg_k`（從 YouTube 網址 `?v=xxx` 取得）  
   - **精選標記**（isFeatured）：**必須勾選為 true**  
   - 縮圖、標籤等可選填  
4. 點 **Publish** 發布（未發布不會出現在網站）。

### 方式 B：用本站管理頁（若有）

- 開啟 **`admin-featured-videos.html`**（精選節目管理），可新增／編輯／啟用精選節目（背後仍是寫入 Contentful）。

---

## 三、上架「節目表」節目（依時間自動播放）

節目表會依日期、時段顯示並可自動播放，資料來自 **Contentful**，由「統一節目管理」上架。

1. 用瀏覽器開啟 **`admin-calendar-unified.html`**（需先啟動本地伺服器，例如 `start-server-node.bat`，再開 `http://localhost:8000/admin-calendar-unified.html`）。
2. 點 **「🚀 Contentful 主控台」**，確認連線與初始化正常。
3. 在日曆上選擇日期 → **「+ 添加節目」**，填寫：
   - 節目名稱、播出時間  
   - **影片連結**：YouTube ID 或 MP4 網址  
   - 節目類型、描述等  
4. 選好要上架的節目後，點 **「📺 上架選中節目」**，系統會把節目寫入 Contentful。
5. 首頁節目表會從 Contentful 讀取，依時間顯示與播放。

**若上架後在月曆／週曆／日曆視圖沒看到剛上架的節目**：請在統一節目管理頁面點 **「📥 重新載入」**，從 Contentful 重新拉一次資料後，三種視圖都會更新顯示。

詳細步驟可參考：**`PROGRAM_UPLOAD_GUIDE.md`**。

---

## 四、上架「影片專區」裡的影片（分類：所有影片／非洲／歐洲…）

目前首頁的「影片專區」是 **iframe 載入 `video-tcawg-with-fix.html`**，這份檔案是從 **TCAWG 官網影片頁**（`https://www.tcawg.com/travel/video.html`）另存下來的**靜態複本**，裡面的分類與影片列表是寫在 HTML 裡的，**不是**從 Contentful 或本站後台讀取。

因此：

- **若影片是由 TCAWG 官網維護**：新影片要上在 **TCAWG 官網的影片專區後台**；之後若要讓本站 iframe 也更新，需要再從官網重新「另存」一次 `video.html` 並覆蓋成 **`video-tcawg-with-fix.html`**（保留我們加在裡面的修正程式碼）。
- **若希望由本站／Contentful 控管列表**：可改為 iframe 載入本站的 **`videos.html`**（Contentful 影片列表），則新影片改在 Contentful 新增 `video` 即可，版面會是本站的影片列表樣式，不是 TCAWG 的版型。詳見 **`VIDEO-TCAWG-複本與修正說明.md`**。

---

## 五、快速對照：我想… 要怎麼做？

| 我想… | 做法 |
|--------|------|
| 讓某支影片出現在首頁「精選節目」 | 在 Contentful 新增/編輯一筆 `video`，**isFeatured 勾選 true** 並發布。 |
| 排節目表、依時間自動播放 | 開 **admin-calendar-unified.html** → 添加節目 → **「📺 上架選中節目」** 到 Contentful。 |
| 讓影片出現在「影片專區」分類列表 | 在 **TCAWG 官網**上架該影片；本站若繼續用 iframe 複本，需重新另存並覆蓋 `video-tcawg-with-fix.html`。 |
| 用 Contentful 管理影片列表、不用 TCAWG 版型 | 把首頁影片專區 iframe 的 `src` 改為 **`videos.html`**，新影片在 Contentful 的 `video` 新增即可。 |

---

## 六、上架節目後首頁看不到？

首頁「現正播出／今日節目表」**只顯示「當天」**的節目（依台灣日期查 Contentful 的 `scheduleItem`）。若上架後沒看到，請依序檢查：

1. **日期是否為「今天」**  
   在統一節目管理裡，您上架的那一筆節目的**播出日期**是否就是**今天的台灣日期**？若排的是明天或其它天，首頁當天只會顯示當天的節目，不會出現其它天的。

2. **重新整理首頁**  
   打開首頁（index.html 或 http://localhost:8000/），按 **Ctrl+F5** 或 **重新整理**，讓頁面重新向 Contentful 要節目表。

3. **後台是否顯示已上架**  
   到後台 **「已上架節目管理」**（admin-published-programs.html）查看該節目是否在列表裡；若沒有，代表上架可能失敗或寫入的是別天／別筆。

4. **瀏覽器主控台**  
   在首頁按 **F12 → Console**，重新載入頁面後看是否有：  
   - `查詢日期: YYYY-MM-DD`（應為今天台灣日期）  
   - `Contentful 回應: X 個項目`（X 應 > 0 才有節目）  
   若 X 為 0，表示 Contentful 當天沒有已發布的 `scheduleItem`，需回統一節目管理確認日期與上架是否成功。

---

## 七、注意事項

- **Contentful** 是精選節目、節目表、以及可選的影片列表（videos.html）的資料來源，請確認 Space ID、API Token 與內容類型（如 `video`、`scheduleItem`）設定正確。
- 精選節目、節目表相關說明也可參考：**`FEATURED_VIDEOS_SETUP.md`**、**`PROGRAM_UPLOAD_GUIDE.md`**、**`CONTENTFUL_HERO_VIDEOS_SETUP.md`**（HERO 影片）。

若你接下來要做的只有「精選」或「節目表」其中一種，我可以再幫你寫成一步一步的檢查清單（含實際檔案路徑與按鈕名稱）。
