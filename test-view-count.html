<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§€çœ‹æ¬¡æ•¸æå–æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-input {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: monospace;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª è§€çœ‹æ¬¡æ•¸æå–åŠŸèƒ½æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>æ¸¬è©¦ 1: æ‰‹å‹•æ¸¬è©¦</h3>
            <p>åœ¨ä¸‹æ–¹è¼¸å…¥æ¡†ä¸­è²¼ä¸ŠåŒ…å«è§€çœ‹æ¬¡æ•¸çš„æ–‡æœ¬ï¼Œç„¶å¾Œé»æ“Šæ¸¬è©¦æŒ‰éˆ•ï¼š</p>
            <textarea id="testInput" class="test-input" placeholder="è«‹è²¼ä¸ŠåŒ…å«è§€çœ‹æ¬¡æ•¸çš„æ–‡æœ¬ï¼Œä¾‹å¦‚ï¼š
è§€çœ‹æ¬¡æ•¸:13æ¬¡ 2025å¹´9æœˆ24æ—¥ #èˆªå‘ä¸–ç•Œæ—…éŠ

åŠ æ‹¿å¤§å°¼åŠ æ‹‰ç€‘å¸ƒ (Niagara Falls, Canada)"></textarea>
            <br>
            <button class="test-button" onclick="testManual()">ğŸ” æ¸¬è©¦æå–</button>
            <button class="test-button" onclick="testClipboard()">ğŸ“‹ æ¸¬è©¦å‰ªè²¼ç°¿</button>
            <div id="manualResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>æ¸¬è©¦ 2: é è¨­æ¸¬è©¦æ¡ˆä¾‹</h3>
            <button class="test-button" onclick="testPreset()">ğŸ§ª åŸ·è¡Œé è¨­æ¸¬è©¦</button>
            <div id="presetResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>æ¸¬è©¦ 3: å¤šç¨®æ ¼å¼æ¸¬è©¦</h3>
            <button class="test-button" onclick="testMultipleFormats()">ğŸ”„ æ¸¬è©¦å¤šç¨®æ ¼å¼</button>
            <div id="formatResult" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // å¾ admin-calendar-unified.html è¤‡è£½çš„å‡½æ•¸
        function extractViewCountInfo(text) {
            try {
                console.log('ğŸ” é–‹å§‹æå–è§€çœ‹æ¬¡æ•¸ï¼Œè¼¸å…¥æ–‡æœ¬:', text.substring(0, 200) + '...');
                
                // åŒ¹é…ä¸­æ–‡æ ¼å¼ï¼šè§€çœ‹æ¬¡æ•¸:22æ¬¡ 2025å¹´9æœˆ22æ—¥ï¼ˆå¯èƒ½åŒ…å«æ¨™ç±¤ï¼‰
                const chinesePattern = /è§€çœ‹æ¬¡æ•¸:(\d+)æ¬¡\s*(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥(?:\s*#\S+)?/;
                const chineseMatch = text.match(chinesePattern);
                console.log('ğŸ” ä¸­æ–‡æ ¼å¼åŒ¹é…çµæœ:', chineseMatch);
                
                if (chineseMatch) {
                    const [, viewCount, year, month, day] = chineseMatch;
                    
                    // æå–æ¨™ç±¤ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                    const tagMatch = chineseMatch[0].match(/#(\S+)/);
                    const tag = tagMatch ? tagMatch[1] : null;
                    
                    return {
                        viewCount: `${viewCount}æ¬¡`,
                        date: `${year}å¹´${month}æœˆ${day}æ—¥`,
                        tag: tag,
                        fullText: chineseMatch[0],
                        type: 'chinese'
                    };
                }
                
                // åŒ¹é…è‹±æ–‡æ ¼å¼ï¼šViews: 22 September 22, 2025
                const englishPattern = /Views:\s*(\d+)\s*(\w+)\s*(\d{1,2}),\s*(\d{4})/i;
                const englishMatch = text.match(englishPattern);
                console.log('ğŸ” è‹±æ–‡æ ¼å¼åŒ¹é…çµæœ:', englishMatch);
                
                if (englishMatch) {
                    const [, viewCount, month, day, year] = englishMatch;
                    return {
                        viewCount: `${viewCount} views`,
                        date: `${month} ${day}, ${year}`,
                        tag: null,
                        fullText: englishMatch[0],
                        type: 'english'
                    };
                }
                
                // åŒ¹é…ç°¡åŒ–æ ¼å¼ï¼šè§€çœ‹æ¬¡æ•¸:22æ¬¡
                const simplePattern = /è§€çœ‹æ¬¡æ•¸:(\d+)æ¬¡/;
                const simpleMatch = text.match(simplePattern);
                console.log('ğŸ” ç°¡åŒ–æ ¼å¼åŒ¹é…çµæœ:', simpleMatch);
                
                if (simpleMatch) {
                    return {
                        viewCount: `${simpleMatch[1]}æ¬¡`,
                        date: 'æ—¥æœŸæœªæ‰¾åˆ°',
                        tag: null,
                        fullText: simpleMatch[0],
                        type: 'simple'
                    };
                }
                
                console.log('âŒ æ²’æœ‰æ‰¾åˆ°ä»»ä½•è§€çœ‹æ¬¡æ•¸æ ¼å¼');
                return null;
            } catch (error) {
                console.error('æå–è§€çœ‹æ¬¡æ•¸å¤±æ•—:', error);
                return null;
            }
        }

        async function pasteFromClipboard() {
            try {
                console.log('ğŸ“‹ é–‹å§‹å¾å‰ªè²¼ç°¿è®€å–å…§å®¹...');
                const text = await navigator.clipboard.readText();
                console.log('ğŸ“‹ å‰ªè²¼ç°¿å…§å®¹é•·åº¦:', text ? text.length : 0);
                console.log('ğŸ“‹ å‰ªè²¼ç°¿å…§å®¹é è¦½:', text ? text.substring(0, 200) + '...' : 'ç©º');
                
                if (text && text.trim()) {
                    // æ¸…ç†å‰ªè²¼ç°¿å…§å®¹
                    let cleanedText = text.trim();
                    
                    // è‡ªå‹•æå–è§€çœ‹æ¬¡æ•¸
                    console.log('ğŸ” é–‹å§‹æå–è§€çœ‹æ¬¡æ•¸...');
                    const viewCountInfo = extractViewCountInfo(cleanedText);
                    if (viewCountInfo) {
                        console.log('ğŸ“Š æå–åˆ°è§€çœ‹æ¬¡æ•¸ä¿¡æ¯:', viewCountInfo);
                        return {
                            success: true,
                            message: `âœ… è‡ªå‹•æå–è§€çœ‹æ¬¡æ•¸: ${viewCountInfo.viewCount} (${viewCountInfo.date})`,
                            data: viewCountInfo
                        };
                    } else {
                        console.log('âŒ æ²’æœ‰æå–åˆ°è§€çœ‹æ¬¡æ•¸ä¿¡æ¯');
                        return {
                            success: false,
                            message: 'âŒ æ²’æœ‰æå–åˆ°è§€çœ‹æ¬¡æ•¸ä¿¡æ¯',
                            data: null
                        };
                    }
                } else {
                    return {
                        success: false,
                        message: 'å‰ªè²¼ç°¿ç‚ºç©ºï¼Œè«‹å…ˆè¤‡è£½ YouTube æè¿°å…§å®¹',
                        data: null
                    };
                }
            } catch (error) {
                console.error('è®€å–å‰ªè²¼ç°¿å¤±æ•—:', error);
                return {
                    success: false,
                    message: 'ç„¡æ³•è®€å–å‰ªè²¼ç°¿ï¼Œè«‹æ‰‹å‹•è¼¸å…¥æè¿°',
                    data: null
                };
            }
        }

        function testManual() {
            const input = document.getElementById('testInput').value;
            const resultDiv = document.getElementById('manualResult');
            
            if (!input.trim()) {
                showResult(resultDiv, 'è«‹å…ˆè¼¸å…¥æ¸¬è©¦æ–‡æœ¬', 'error');
                return;
            }
            
            const result = extractViewCountInfo(input);
            if (result) {
                showResult(resultDiv, `âœ… æå–æˆåŠŸï¼
è§€çœ‹æ¬¡æ•¸: ${result.viewCount}
æ—¥æœŸ: ${result.date}
å®Œæ•´æ–‡æœ¬: ${result.fullText}
é¡å‹: ${result.type}`, 'success');
            } else {
                showResult(resultDiv, 'âŒ æ²’æœ‰æå–åˆ°è§€çœ‹æ¬¡æ•¸ä¿¡æ¯', 'error');
            }
        }

        async function testClipboard() {
            const resultDiv = document.getElementById('manualResult');
            showResult(resultDiv, 'ğŸ“‹ æ­£åœ¨è®€å–å‰ªè²¼ç°¿...', 'info');
            
            const result = await pasteFromClipboard();
            showResult(resultDiv, result.message, result.success ? 'success' : 'error');
            
            if (result.data) {
                const details = `
è©³ç´°ä¿¡æ¯:
è§€çœ‹æ¬¡æ•¸: ${result.data.viewCount}
æ—¥æœŸ: ${result.data.date}
å®Œæ•´æ–‡æœ¬: ${result.data.fullText}
é¡å‹: ${result.data.type}`;
                showResult(resultDiv, resultDiv.innerHTML + details, result.success ? 'success' : 'error');
            }
        }

        function testPreset() {
            const resultDiv = document.getElementById('presetResult');
            const testText = `è§€çœ‹æ¬¡æ•¸:13æ¬¡ 2025å¹´9æœˆ24æ—¥ #èˆªå‘ä¸–ç•Œæ—…éŠ

åŠ æ‹¿å¤§å°¼åŠ æ‹‰ç€‘å¸ƒ
å°¼åŠ æ‹‰ç€‘å¸ƒä½æ–¼åŠ æ‹¿å¤§å®‰å¤§ç•¥çœèˆ‡ç¾åœ‹ç´ç´„å·çš„äº¤ç•Œï¼Œæ˜¯ä¸–ç•Œæœ€è‘—åçš„è‡ªç„¶å¥‡è§€ä¹‹ä¸€ã€‚å£¯è§€çš„é¦¬è¹„ç€‘å¸ƒä»¥é©šäººçš„æ°´é‡å‚¾ç€‰è€Œä¸‹ï¼Œæ¯ç§’é«˜é” 280 è¬å…¬å‡ï¼Œæ™¯è±¡éœ‡æ’¼äººå¿ƒã€‚ç™½å¤©å¯ä»¥æ¬£è³ç£…ç¤´æ°´å‹¢ï¼Œå¤œæ™šå‰‡æœ‰ç‡ˆå…‰ç§€èˆ‡ç…™ç«è¡¨æ¼”ï¼Œå†¬å­£æ›´å› æ°´éœ§çµå†°è€Œå‘ˆç¾æ™¶ç‘©å¤¢å¹»çš„æ™¯è‡´ã€‚éŠå®¢å¸¸æ­ä¹˜ã€Œéœ§ä¸­å°‘å¥³è™Ÿã€è¿‘è·é›¢æ„Ÿå—æ°´å‹¢ï¼Œæˆ–ç™»ä¸Šæ–¯å‡±å€«å¡”ï¼ˆSkylon Towerï¼‰ä¿¯ç°å£¯éº—å…¨æ™¯ã€‚

åŠ æ‹¿å¤§æ»‘é›ªå ´
åŠ æ‹¿å¤§æ“æœ‰ä¸–ç•Œç´šçš„æ»‘é›ªå‹åœ°ï¼Œå…¶ä¸­å‘è©©çœçš„ æƒ æ–¯å‹’é»‘æ¢³å±±ï¼ˆWhistler Blackcombï¼‰ æ˜¯åŒ—ç¾æœ€å¤§çš„æ»‘é›ªå ´ï¼Œé›ªé“ç¸½é•·è¶…é 200 å…¬é‡Œï¼Œæ›¾èˆ‰è¾¦ 2010 å¹´å†¬å­£å¥§é‹ï¼Œå¸å¼•ç„¡æ•¸æ»‘é›ªæ„›å¥½è€…ã€‚æ´›ç£¯å±±è„ˆçš„ ç­å¤«ï¼ˆBanffï¼‰èˆ‡éœ²æ˜“çµ²æ¹–ï¼ˆLake Louiseï¼‰ æ»‘é›ªå ´å‰‡ä»¥å£¯éº—å±±æ™¯èˆ‡é«˜å“è³ªç²‰é›ªè‘—ç¨±ï¼Œæ˜¯å†¬å­£æ—…éŠçš„é¦–é¸ã€‚é™¤äº†æ»‘é›ªï¼Œåº¦å‡æ‘é‚„æä¾›é›ªé‹å¥è¡Œã€ç‹—æ‹‰é›ªæ©‡ã€å†°ä¸Šé‹å‹•ç­‰æ´»å‹•ï¼Œè®“éŠå®¢ç›¡æƒ…é«”é©—åŠ æ‹¿å¤§çš„å†°é›ªé­…åŠ›ã€‚
âœˆï¸èˆªå‘ä¸–ç•Œæ—…éŠå°
https://www.tcawg.com/`;
            
            showResult(resultDiv, `ğŸ§ª åŸ·è¡Œé è¨­æ¸¬è©¦ï¼ˆä½¿ç”¨å®Œæ•´çš„æˆªåœ–å…§å®¹ï¼‰...
æ¸¬è©¦æ–‡æœ¬é•·åº¦: ${testText.length} å­—å…ƒ`, 'info');
            
            const result = extractViewCountInfo(testText);
            if (result) {
                const details = `
âœ… æå–æˆåŠŸï¼
è§€çœ‹æ¬¡æ•¸: ${result.viewCount}
æ—¥æœŸ: ${result.date}
æ¨™ç±¤: ${result.tag || 'ç„¡'}
å®Œæ•´æ–‡æœ¬: ${result.fullText}
é¡å‹: ${result.type}`;
                showResult(resultDiv, resultDiv.innerHTML + details, 'success');
            } else {
                showResult(resultDiv, resultDiv.innerHTML + '\nâŒ æ²’æœ‰æå–åˆ°è§€çœ‹æ¬¡æ•¸ä¿¡æ¯', 'error');
            }
        }

        function testMultipleFormats() {
            const resultDiv = document.getElementById('formatResult');
            const testCases = [
                {
                    name: 'æˆªåœ–æ ¼å¼ï¼ˆå«æ¨™ç±¤ï¼‰',
                    text: 'è§€çœ‹æ¬¡æ•¸:13æ¬¡ 2025å¹´9æœˆ24æ—¥ #èˆªå‘ä¸–ç•Œæ—…éŠ\n\nåŠ æ‹¿å¤§å°¼åŠ æ‹‰ç€‘å¸ƒ (Niagara Falls, Canada)'
                },
                {
                    name: 'ä¸­æ–‡æ ¼å¼ï¼ˆä¸å«æ¨™ç±¤ï¼‰',
                    text: 'è§€çœ‹æ¬¡æ•¸:22æ¬¡ 2025å¹´9æœˆ22æ—¥\n\né€™æ˜¯ä¸€å€‹æ¸¬è©¦æè¿°...'
                },
                {
                    name: 'è‹±æ–‡æ ¼å¼',
                    text: 'Views: 22 September 22, 2025\n\nThis is a test description...'
                },
                {
                    name: 'ç°¡åŒ–æ ¼å¼',
                    text: 'è§€çœ‹æ¬¡æ•¸:22æ¬¡\n\né€™æ˜¯ä¸€å€‹æ¸¬è©¦æè¿°...'
                },
                {
                    name: 'ç„¡è§€çœ‹æ¬¡æ•¸',
                    text: 'é€™æ˜¯ä¸€å€‹æ²’æœ‰è§€çœ‹æ¬¡æ•¸çš„æè¿°...'
                }
            ];
            
            let results = 'ğŸ”„ æ¸¬è©¦å¤šç¨®æ ¼å¼:\n\n';
            
            testCases.forEach((testCase, index) => {
                results += `${index + 1}. ${testCase.name}:\n`;
                results += `   æ–‡æœ¬: ${testCase.text.substring(0, 50)}...\n`;
                
                const result = extractViewCountInfo(testCase.text);
                if (result) {
                    results += `   âœ… æå–æˆåŠŸ: ${result.viewCount} (${result.date})\n`;
                } else {
                    results += `   âŒ æ²’æœ‰æå–åˆ°\n`;
                }
                results += '\n';
            });
            
            showResult(resultDiv, results, 'info');
        }

        function showResult(element, message, type) {
            element.style.display = 'block';
            element.className = `result ${type}`;
            element.textContent = message;
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•åŸ·è¡Œé è¨­æ¸¬è©¦
        window.onload = function() {
            console.log('ğŸ§ª è§€çœ‹æ¬¡æ•¸æå–æ¸¬è©¦é é¢å·²è¼‰å…¥');
            console.log('ğŸ§ª å¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹è©³ç´°çš„èª¿è©¦ä¿¡æ¯');
        };
    </script>
</body>
</html>
